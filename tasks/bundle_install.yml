---
- name: Check if `bundle` is installed
  local_action: shell type bundle
  register: bundle_is_installed
  ignore_errors: True

- fail:
    msg: "Error ==> `bundle` is not installed"
  when: "'not found' in bundle_is_installed.stdout"

- name: Install `gems` using `bundle`
  bundler:
    state: present
    user_install: yes
  register: bundle_env
  delegate_to: localhost
  run_once: true

- debug: msg="{{bundle_env}}"
...
